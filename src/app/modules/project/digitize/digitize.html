<ol class="breadcrumb">
  <li><span class="text-muted">Dashboard</span></li>
  <li ui-sref="app.projects">Projects</li>
  <li ui-sref="app.editProject({id: vm.project.id})">{{vm.project.title}} details</li>
  <li ui-sref="app.model({id: vm.project.id})">Edit BPM</li>
  <li class="active">'Digitizing'</li>
</ol>
<div class="btn-group-horizontal pull-right" role="group">
  <button type="button" class="btn btn-default" ui-sref="app.model({id: vm.project.id})"><i class="fa fa-arrow-left text-gray" title="Back"></i></button>
  <button type="button" class="btn btn-gray" ng-click="vm.undo()"><i class="fa fa-undo" title="Undo"></i></button>
  <button type="button" class="btn btn-warning" ng-click="vm.refresh()"><i class="fa fa-refresh" title="Reload services"></i></button>
  <button type="button" class="btn btn-info" ng-click="vm.update()" ><i class="fa fa-floppy-o" title="Save digitized model"></i></button>
  <button type="button" class="btn btn-danger" ng-click="vm.reset()"><i class="fa fa-ban" title="Reset selection"></i></button>

</div>

<div class="row">
<div class="services-canvas cloud" data-drag="true" ng-model="vm.project.services" jqyoui-draggable="{deepCopy:true}" data-jqyoui-options="{revert: 'invalid'}">
<div ng-repeat="serviceArray in vm.suggestedServices">
    <div class="service-list">
    <div ng-repeat="service in serviceArray | orderBy:'digitalComponent.toString()'">
      <div class="service" data-drag="true" ng-model="service" ng-show="service.digitalComponent" jqyoui-draggable="{deepCopy:true}" data-jqyoui-options="{revert: 'invalid'}">
        {{service.digitalComponent}}
      </div>
    </div>
    </div>
  </div>
</div>


    <div class="drop-canvas" data-drop="true" ng-model="vm.project.services"
         jqyoui-droppable="{deepCopy:true, multiple:true}">
      <span><i class="fa fa-cloud-download fa-lg" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Drop Service here</span>
    </div>


<div class="drop-services-canvas" >
  <div ng-repeat="service in vm.project.services track by $index">
  <div class="drop-service" data-drop="true" ng-model="vm.project.services" jqyoui-droppable="{index: {{$index}}, deepCopy:true}">

      <div class="service selected-service">
        {{service.digitalComponent}}
      </div>
    </div>
  </div>
</div>
  <!--
    <div class="drop-services-canvas">

      <div class="drop-service" ng-repeat="service in vm.project.services" data-drop="true" ng-model="service" jqyoui-droppable="{deepCopy:true}">

            <span ng-hide="!vm.project.services.length">Drop Service</span>
          {{service.digitalComponent}}
      </div>

    </div>
  -->

<div class="digital-canvas">
<div ng-repeat="activity in vm.project.activities track by $index">
  <div class="digital-activity-wrapper">
  <!----><i class="fa fa-long-arrow-right fa-lg"  ng-show="$index != 0"></i><!--
  --><span class="activity-digital2">{{activity.modelActivity}}</span>
  </div>
</div>
</div>
</div>

<div class="row">
  <button type="button" class="btn btn-block btn-info" ng-click="vm.update()" ng-show="vm.project.activities.length == vm.project.services.length" ui-sref="app.digitizedBPM({id: vm.project.id})">
    Complete Digitization Process
  </button>
</div>
