<ol class="breadcrumb">
  <li><span class="text-muted">YOU ARE HERE</span></li>
  <li class="active">{{vm.project.id ? 'Edit project' : 'Create new'}}</li>
</ol>

<div class="col-md-9">

  <div class="row">
    <widget>
      <form novalidate role="form" name="projectForm" class="form-horizontal mt"
            ng-submit="projectForm.$valid && (vm.project.id ? vm.update() : vm.save())">
        <h4 class="mt-0">{{vm.project.id ? 'Editing ' : 'Creating new'}} project</h4>

        <div class="form-group">
          <label class="col-sm-2 control-label" for="title">Title</label>
          <div class="col-sm-10">
            <input type="text" id="title" name="title" class="form-control" ng-model="vm.project.title" required ng-minlength=3 ng-maxlength=100 />
            <div ng-show="projectForm.title.$invalid && (projectForm.title.$dirty || projectForm.$submitted)">
              <small class="error" ng-show="projectForm.title.$error.required">
                Title is required.
              </small>
              <small class="error" ng-show="projectForm.title.$error.minlength">
                Title is required to be at least 3 characters
              </small>
              <small class="error" ng-show="projectForm.title.$error.maxlength">
                Title cannot be longer than 100 characters
              </small>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label class="control-label col-sm-2">Description</label>
          <div class="col-sm-10">
                         <textarea name="description" class="form-control" rows="2" ng-model="vm.project.description" required ng-minlength=1 />
            <div ng-show="projectForm.description.$invalid && (projectForm.description.$dirty  || projectForm.$submitted)">
              <small class="error" ng-show="projectForm.description.$error.required">
                Description is required.
              </small>
              <small class="error" ng-show="projectForm.description.$error.minlength">
                Description is required to be at least 5 characters
              </small>
            </div>
          </div>
        </div>


        <div class="form-group">
          <div class="col-sm-12">
            <label>Business Procedure Model</label>
            <div class="btn-group-horizontal pull-right" role="group">
              <button type="button" class="btn btn-default" ui-sref="app.projects"><i class="fa fa-arrow-left text-gray"
                                                                                     title="Cancel"></i></button>
              <button type="button" class="btn btn-danger" ng-click="vm.reset()"><i class="fa fa-undo"
                                                                                    title="Reset model"></i></button>
              <button type="submit" class="btn btn-primary"><i class="fa fa-floppy-o" title="Save model"></i></button>
            </div>

          </div>
        </div>

        <div class="form-group" ng-show="vm.project.id">
          <div class="col-sm-12">
            <div class="analog-canvas" data-drop="true" ng-model="vm.project.elements"
                 jqyoui-droppable="{multiple:true}">
              <div ng-repeat="element in vm.project.elements track by $index">
                <i class="fa fa-long-arrow-right fa-lg" aria-hidden="true" ng-show="$index != 0"></i>
                <div class="element model-element">
                  {{element.model_element}}
                </div>
              </div>
            </div>
            <button type="submit" class="btn btn-block btn-info" ng-click="vm.update()" ui-sref="app.digitize({id: vm.project.id})">Digitize
            </button>
            </div>
          </div>

      </form>
    </widget>
  </div>

</div>
<div class="col-md-3" ng-include="'app/modules/project/edit/available_elements.html'"></div>



